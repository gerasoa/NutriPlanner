@using CCRS.WebApp.MVC.Extensions;
@using Microsoft.AspNetCore.Identity;
@inject IUser AppUser;

@if (AppUser.IsAuthenticated())
{
    <div class="dropdown d-inline-block">
        <a href="#" class="icontext dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <img class="icon icon-sm rounded-circle" src="https://s.gravatar.com/avatar/@this.HashEmailForGravatar(AppUser.GetUserEmail())?d=mm&s=45" alt="User Avatar">
        </a>@AppUser.Name
        <!-- iconbox // -->
        <div class="dropdown-menu dropdown-menu-end" style="position: absolute; will-change: transform; top: 12px; left: 91px; transform: translate3d(150px, 32px, 0px);">
            <a class="dropdown-item">- @AppUser.Name - </a>
            <a class="dropdown-item" href="#">My Profile</a>
            <a class="dropdown-item" href="#">My Orders</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" asp-controller="Identity" asp-action="Logout">Logout</a>
        </div>
    </div>

}
else
{
    <div class="widget-header">
        <small class="title text-muted">Welcomeo!</small>
        <div>
            <a asp-controller="Identity" asp-action="Register">Create your account</a> <span> | </span>
            <a asp-controller="Identity" asp-action="Login"> Login</a>
        </div>
    </div>
}
